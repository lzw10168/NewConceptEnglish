# <div id="words" class="words">
#                                 <i class="bg-green fas fa-font" onclick="if (!window.__cfRLUnblockHandlers) return false; copy_url('https://www.ha85.com/lessons/2','words')" data-cf-modified-59afb76737b6268ee6d3602a-=""></i>
#                                 <div class="timeline-item mr-0">
#                                     <span class="time">
#                                         <i class="fas fa-circle"></i>
#                                         25个相关单词
#                                     </span>
#                                     <h3 class="timeline-header no-border mx-3">
#                                         与课文关联的单词
#                                         <a href="https://www.ha85.com/lessons/words/2" target="_blank" class="text-info" data-toggle="tooltip" title="进入课文单词学习专用模式">
#                                             <i class="fas fa-th-list"></i>
#                                         </a>
#                                         <a href="javascript:play_video('https://www.ha85.com/storage/lessons/2/notes/pob3aa1ugzqrg4ohuj0txwnybhunb5ip8zq5ytx9.mp4','课文单词讲解')" data-toggle="tooltip" title="播放单词讲解视频 Play the word lesson video" class="text-success mx-2">
#                                             <i class="fas fa-video"></i>
#                                         </a>
#                                         <span data-toggle="tooltip" data-html="true" title="<h6 class='pt-3'>单词学习参考：</h6><ol class='text-left'><li>观看单词讲解。</li><li>通过音标选择[美音] 或 [英音]朗读。</li><li>点击进入每个单词的详情页，了解单词词性及变化规则。</li><li>在作业本上书写并记忆单词。</li></ol>">
#                                             <i class="fas fa-question-circle"></i>
#                                         </span>
#                                     </h3>
#                                     <div class="timeline-body">
#                                         <div class="row">
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 理由；借口">
#                                                     <a href="/word/excuse" class="text-lightblue" target="_blank">excuse</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ɪkˈskjuːs<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="excuse">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>v. 原谅</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="pron. 我（宾格）">
#                                                     <a href="/word/me" class="text-lightblue" target="_blank">me</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     miː<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="me">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>pron. 我(宾格)</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="adv. 是">
#                                                     <a href="/word/yes" class="text-lightblue" target="_blank">yes</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     jes<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="yes">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>adv. 是的</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="prep.是 [域] Iceland ,冰岛 [军] Internal Security,治安">
#                                                     <a href="/word/is" class="text-lightblue" target="_blank">is</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ɪz<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="is">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>v. be动词现在时第三人称单数</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="pron. 这；这个；这里">
#                                                     <a href="/word/this" class="text-lightblue" target="_blank">this</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ðɪs<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="this">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>pron. 这</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="pron. 你的，你们的">
#                                                     <a href="/word/your" class="text-lightblue" target="_blank">your</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     jɔː(r)<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="your">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>pron. 你的，你们的</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 手提包">
#                                                     <a href="/word/handbag" class="text-lightblue" target="_blank">handbag</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈhændbæɡ<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="handbag">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. (女用)手提包</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 原谅；宽恕；赦免">
#                                                     <a href="/word/pardon" class="text-lightblue" target="_blank">pardon</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈpɑːd(ə)n<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="pardon">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>interj. 原谅，请再说一遍</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="pron. 它">
#                                                     <a href="/word/it" class="text-lightblue" target="_blank">it</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ɪt<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="it">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>pron. 它</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="vt. 感谢">
#                                                     <a href="/word/thank" class="text-lightblue" target="_blank">thank</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     θæŋk<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="thank">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>v. 感谢</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="pron. 你；你们">
#                                                     <a href="/word/you" class="text-lightblue" target="_blank">you</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     juː<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="you">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>pron. 你(们)</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="adj. 十足的；恰好是，正是；甚至；特有的">
#                                                     <a href="/word/very" class="text-lightblue" target="_blank">very</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈveri<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="very">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>adv. 非常地</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="adv. 非常，很">
#                                                     <a href="/word/much" class="text-lightblue" target="_blank">much</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     mʌtʃ<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="much">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>adv. 多地</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 钢笔；围栏；作家">
#                                                     <a href="/word/pen" class="text-lightblue" target="_blank">pen</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     pen<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="pen">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 钢笔</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 铅笔；笔状物">
#                                                     <a href="/word/pencil" class="text-lightblue" target="_blank">pencil</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈpens(ə)l<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="pencil">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 铅笔</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 书籍；帐簿；卷；名册；工作簿">
#                                                     <a href="/word/book" class="text-lightblue" target="_blank">book</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     bʊk<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="book">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 书</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="vt. 注视；观察；看守；警戒">
#                                                     <a href="/word/watch" class="text-lightblue" target="_blank">watch</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     wɒtʃ<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="watch">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 手表</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 外套">
#                                                     <a href="/word/coat" class="text-lightblue" target="_blank">coat</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     kəʊt<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="coat">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 上衣，外衣</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="vt. 给 … 穿衣">
#                                                     <a href="/word/dress" class="text-lightblue" target="_blank">dress</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     dres<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="dress">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 连衣裙</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 裙子">
#                                                     <a href="/word/skirt" class="text-lightblue" target="_blank">skirt</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     skɜːt<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="skirt">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 裙子</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 衬衫；汗衫，内衣">
#                                                     <a href="/word/shirt" class="text-lightblue" target="_blank">shirt</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ʃɜːt<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="shirt">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 衬衣</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 汽车；车厢">
#                                                     <a href="/word/car" class="text-lightblue" target="_blank">car</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     kɑː(r)<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="car">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 小汽车</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="n. 住宅；家庭；某种用途的建筑物；机构；议会">
#                                                     <a href="/word/house" class="text-lightblue" target="_blank">house</a>
#                                                     <span class="text-danger">*</span>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     haʊs<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="house">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>n. 房子</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate border-bottom">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="谢谢你">
#                                                     <a href="/word/thank-you" class="text-lightblue" target="_blank">thank you</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈθæŋk juː<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="thank you">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>interj. 感谢你(们)</small>
#                                             </div>
#                                             <div class="col-sm-6 col-lg-4 pt-1 mb-1 text-truncate">
#                                                 <h4 class="d-inline-block" data-toggle="tooltip" data-html="true" title="非常; 良; 无可不可">
#                                                     <a href="/word/very-much" class="text-lightblue" target="_blank">very much</a>
#                                                 </h4>
#                                                 <small class="text-gray">
#                                                     <em class="phonetic">/</em>
#                                                     ˈveri mʌtʃ<em class="phonetic">/</em>
#                                                 </small>
#                                                 <span class="btn dictvoice" data-word="very much">
#                                                     <i class="fas fa-volume-down"></i>
#                                                 </span>
#                                                 <small>interj. 非常地</small>
#                                             </div>
#                                         </div>
#                                     </div>

id_map = {
    "lesson01": "76",
    "lesson02": "77",
    "lesson03": "78",
    "lesson04": "79",
    "lesson05": "80",
    "lesson06": "81",
    "lesson07": "82",
    "lesson08": "83",
    "lesson09": "84",
    "lesson10": "85",
    "lesson11": "86",
    "lesson12": "87",
    "lesson13": "88",
    "lesson14": "89",
    "lesson15": "90",
    "lesson16": "91",
    "lesson17": "92",
    "lesson18": "93",
    "lesson19": "94",
    "lesson20": "95",
    "lesson21": "96",
    "lesson22": "97",
    "lesson23": "98",
    "lesson24": "99",
    "lesson25": "100",
    "lesson26": "101",
    "lesson27": "102",
    "lesson28": "103",
    "lesson29": "104",
    "lesson30": "105",
    "lesson31": "106",
    "lesson32": "107",
    "lesson33": "108",
    "lesson34": "109",
    "lesson35": "110",
    "lesson36": "111",
    "lesson37": "112",
    "lesson38": "113",
    "lesson39": "114",
    "lesson40": "115",
    "lesson41": "116",
    "lesson42": "117",
    "lesson43": "118",
    "lesson44": "119",
    "lesson45": "120",
    "lesson46": "121",
    "lesson47": "122",
    "lesson48": "123",
    "lesson49": "124",
    "lesson50": "125",
    "lesson51": "126",
    "lesson52": "127",
    "lesson53": "128",
    "lesson54": "129",
    "lesson55": "130",
    "lesson56": "131",
    "lesson57": "132",
    "lesson58": "133",
    "lesson59": "134",
    "lesson60": "135",
    "lesson61": "136",
    "lesson62": "137",
    "lesson63": "138",
    "lesson64": "139",
    "lesson65": "140",
    "lesson66": "141",
    "lesson67": "142",
    "lesson68": "143",
    "lesson69": "144",
    "lesson70": "145",
    "lesson71": "146",
    "lesson72": "147",
    "lesson73": "148",
    "lesson74": "149",
    "lesson75": "150",
    "lesson76": "151",
    "lesson77": "152",
    "lesson78": "153",
    "lesson79": "154",
    "lesson80": "155",
    "lesson81": "156",
    "lesson82": "157",
    "lesson83": "158",
    "lesson84": "159",
    "lesson85": "160",
    "lesson86": "161",
    "lesson87": "162",
    "lesson88": "163",
    "lesson89": "164",
    "lesson90": "165",
    "lesson91": "166",
    "lesson92": "167",
    "lesson93": "168",
    "lesson94": "169",
    "lesson95": "170",
    "lesson96": "171",
}
# https://www.youdao.com/result?word=excuse&lang=en
# https://dict.youdao.com/dictvoice?audio=excuse

url = 'https://www.ha85.com/lessons/'

import json
import requests
from bs4 import BeautifulSoup
import time

def get_vocabulary(course_id):
    """
    Get vocabulary data for a given course ID
    
    Args:
        course_id (str): Course ID like 'course-1-001'
        
    Returns:
        str: JSON string containing word information
        {
            "words": [
                {
                    "word": "excuse",
                    "toggle": "n. 理由；借口",
                    "isDanger": 1,
                    "phonetic": "ɪkˈskjuːs",
                    "meaning": "v. 原谅"
                },
                ...
            ]
        }
    """
    # Get mapped ID from id_map
    if course_id not in id_map:
        return json.dumps({"words": []})
        
    lesson_id = id_map[course_id]
    
    # Make request to get lesson page
    response = requests.get(url + lesson_id)
    if response.status_code != 200:
        return json.dumps({"words": []})
        
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # Find words container
    words_div = soup.find('div', id='words')
    if not words_div:
        return json.dumps({"words": []})
        
    vocabulary = []
    
    # Find all word entries
    word_divs = words_div.find_all('div', class_='col-sm-6')
    
    for word_div in word_divs:
        # Get word heading
        h4 = word_div.find('h4')
        if not h4:
            continue
            
        word_data = {
            'word': h4.find('a').text.strip(),
            'toggle': h4.get('title', ''),
            'isDanger': 1 if h4.find('span', class_='text-danger') else 0,
            'phonetic': word_div.find('small', class_='text-gray').text.strip('/').strip(),
            'meaning': word_div.find_all('small')[-1].text
        }
        
        vocabulary.append(word_data)
        
    return json.dumps({"words": vocabulary}, ensure_ascii=False)

def get_all_vocabulary():
    all_vocabulary = {}
    
    for lesson_key in id_map.keys():
        print(f"Fetching vocabulary for {lesson_key}...")
        json_data = get_vocabulary(lesson_key)
        all_vocabulary[lesson_key] = json.loads(json_data)
        time.sleep(1)  # 添加1秒延时
        
    return json.dumps(all_vocabulary, ensure_ascii=False, indent=2)

# 保存到文件
with open('all_vocabulary.json', 'w', encoding='utf-8') as f:
    f.write(get_all_vocabulary())


id_map = {
    "lesson01": "76",
    "lesson02": "77",
    "lesson03": "78",
    "lesson04": "79",
    "lesson05": "80",
    "lesson06": "81",
    "lesson07": "82",
    "lesson08": "83",
    "lesson09": "84",
    "lesson10": "85",
    "lesson11": "86",
    "lesson12": "87",
    "lesson13": "88",
    "lesson14": "89",
    "lesson15": "90",
    "lesson16": "91",
    "lesson17": "92",
    "lesson18": "93",
    "lesson19": "94",
    "lesson20": "95",
    "lesson21": "96",
    "lesson22": "97",
    "lesson23": "98",
    "lesson24": "99",
    "lesson25": "100",
    "lesson26": "101",
    "lesson27": "102",
    "lesson28": "103",
    "lesson29": "104",
    "lesson30": "105",
    "lesson31": "106",
    "lesson32": "107",
    "lesson33": "108",
    "lesson34": "109",
    "lesson35": "110",
    "lesson36": "111",
    "lesson37": "112",
    "lesson38": "113",
    "lesson39": "114",
    "lesson40": "115",
    "lesson41": "116",
    "lesson42": "117",
    "lesson43": "118",
    "lesson44": "119",
    "lesson45": "120",
    "lesson46": "121",
    "lesson47": "122",
    "lesson48": "123",
    "lesson49": "124",
    "lesson50": "125",
    "lesson51": "126",
    "lesson52": "127",
    "lesson53": "128",
    "lesson54": "129",
    "lesson55": "130",
    "lesson56": "131",
    "lesson57": "132",
    "lesson58": "133",
    "lesson59": "134",
    "lesson60": "135",
    "lesson61": "136",
    "lesson62": "137",
    "lesson63": "138",
    "lesson64": "139",
    "lesson65": "140",
    "lesson66": "141",
    "lesson67": "142",
    "lesson68": "143",
    "lesson69": "144",
    "lesson70": "145",
    "lesson71": "146",
    "lesson72": "147",
    "lesson73": "148",
    "lesson74": "149",
    "lesson75": "150",
    "lesson76": "151",
    "lesson77": "152",
    "lesson78": "153",
    "lesson79": "154",
    "lesson80": "155",
    "lesson81": "156",
    "lesson82": "157",
    "lesson83": "158",
    "lesson84": "159",
    "lesson85": "160",
    "lesson86": "161",
    "lesson87": "162",
    "lesson88": "163",
    "lesson89": "164",
    "lesson90": "165",
    "lesson91": "166",
    "lesson92": "167",
    "lesson93": "168",
    "lesson94": "169",
    "lesson95": "170",
    "lesson96": "171",
}
# https://www.youdao.com/result?word=excuse&lang=en
# https://dict.youdao.com/dictvoice?audio=excuse

url = 'https://www.ha85.com/lessons/'

import json
import requests
from bs4 import BeautifulSoup
import time

def get_vocabulary(course_id):
    """
    Get vocabulary data for a given course ID
    
    Args:
        course_id (str): Course ID like 'course-1-001'
        
    Returns:
        str: JSON string containing word information
        {
            "words": [
                {
                    "word": "excuse",
                    "toggle": "n. 理由；借口",
                    "isDanger": 1,
                    "phonetic": "ɪkˈskjuːs",
                    "meaning": "v. 原谅"
                },
                ...
            ]
        }
    """
    # Get mapped ID from id_map
    if course_id not in id_map:
        return json.dumps({"words": []})
        
    lesson_id = id_map[course_id]
    
    # Make request to get lesson page
    response = requests.get(url + lesson_id)
    if response.status_code != 200:
        return json.dumps({"words": []})
        
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # Find words container
    words_div = soup.find('div', id='words')
    if not words_div:
        return json.dumps({"words": []})
        
    vocabulary = []
    
    # Find all word entries
    word_divs = words_div.find_all('div', class_='col-sm-6')
    
    for word_div in word_divs:
        # Get word heading
        h4 = word_div.find('h4')
        if not h4:
            continue
            
        word_data = {
            'word': h4.find('a').text.strip(),
            'toggle': h4.get('title', ''),
            'isDanger': 1 if h4.find('span', class_='text-danger') else 0,
            'phonetic': word_div.find('small', class_='text-gray').text.strip('/').strip(),
            'meaning': word_div.find_all('small')[-1].text
        }
        
        vocabulary.append(word_data)
        
    return json.dumps({"words": vocabulary}, ensure_ascii=False)

def get_all_vocabulary():
    all_vocabulary = {}
    
    for lesson_key in id_map.keys():
        print(f"Fetching vocabulary for {lesson_key}...")
        json_data = get_vocabulary(lesson_key)
        all_vocabulary[lesson_key] = json.loads(json_data)
        time.sleep(1)  # 添加1秒延时
        
    return json.dumps(all_vocabulary, ensure_ascii=False, indent=2)

# 获取所有课程的单词数据
all_json_data = get_all_vocabulary()

# 保存到文件
with open('all_vocabulary.json', 'w', encoding='utf-8') as f:
    f.write(all_json_data)

print("Data has been saved to all_vocabulary.json")



